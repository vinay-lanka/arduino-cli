



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Arduino Command Line Interface">
      
      
        <link rel="canonical" href="https://arduino.github.io/arduino-cli/sketch-build-process/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-4.6.3">
    
    
      
        <title>Sketch build process - Arduino CLI</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.adb8469c.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#009688">
      
    
    
      <script src="../assets/javascripts/modernizr.86422ebf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="teal" data-md-color-accent="orange">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#overview" tabindex="0" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://arduino.github.io/arduino-cli/" title="Arduino CLI" aria-label="Arduino CLI" class="md-header-nav__button md-logo">
          
            <img alt="logo" src="../img/icon_mac_light.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Arduino CLI
            </span>
            <span class="md-header-nav__topic">
              
                Sketch build process
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" aria-label="search" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/arduino/arduino-cli" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    arduino/arduino-cli
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://arduino.github.io/arduino-cli/" title="Arduino CLI" class="md-nav__button md-logo">
      
        <img alt="logo" src="../img/icon_mac_light.png" width="48" height="48">
      
    </a>
    Arduino CLI
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/arduino/arduino-cli" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    arduino/arduino-cli
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Documentation Home" class="md-nav__link">
      Documentation Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../installation/" title="Installation" class="md-nav__link">
      Installation
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../getting-started/" title="Getting started" class="md-nav__link">
      Getting started
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../CONTRIBUTING/" title="How to contribute" class="md-nav__link">
      How to contribute
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../FAQ/" title="FAQ" class="md-nav__link">
      FAQ
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Command reference
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Command reference
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli/" title="Arduino cli" class="md-nav__link">
      Arduino cli
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_board/" title="board" class="md-nav__link">
      board
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_board_attach/" title="board attach" class="md-nav__link">
      board attach
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_board_details/" title="board details" class="md-nav__link">
      board details
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_board_list/" title="board list" class="md-nav__link">
      board list
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_board_listall/" title="board listall" class="md-nav__link">
      board listall
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_cache/" title="cache" class="md-nav__link">
      cache
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_cache_clean/" title="cache clean" class="md-nav__link">
      cache clean
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_compile/" title="compile" class="md-nav__link">
      compile
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_config/" title="config" class="md-nav__link">
      config
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_config_dump/" title="config dump" class="md-nav__link">
      config dump
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_config_init/" title="config init" class="md-nav__link">
      config init
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_core/" title="core" class="md-nav__link">
      core
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_core_download/" title="core download" class="md-nav__link">
      core download
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_core_install/" title="core install" class="md-nav__link">
      core install
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_core_list/" title="core list" class="md-nav__link">
      core list
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_core_search/" title="core search" class="md-nav__link">
      core search
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_core_uninstall/" title="core uninstall" class="md-nav__link">
      core uninstall
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_core_update-index/" title="core update index" class="md-nav__link">
      core update index
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_core_upgrade/" title="core upgrade" class="md-nav__link">
      core upgrade
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_daemon/" title="daemon" class="md-nav__link">
      daemon
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_debug/" title="debug" class="md-nav__link">
      debug
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_lib/" title="lib" class="md-nav__link">
      lib
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_lib_deps/" title="lib deps" class="md-nav__link">
      lib deps
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_lib_download/" title="lib download" class="md-nav__link">
      lib download
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_lib_install/" title="lib install" class="md-nav__link">
      lib install
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_lib_list/" title="lib list" class="md-nav__link">
      lib list
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_lib_search/" title="lib search" class="md-nav__link">
      lib search
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_lib_uninstall/" title="lib uninstall" class="md-nav__link">
      lib uninstall
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_lib_update-index/" title="lib update-index" class="md-nav__link">
      lib update-index
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_lib_upgrade/" title="lib upgrade" class="md-nav__link">
      lib upgrade
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_sketch/" title="sketch" class="md-nav__link">
      sketch
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_sketch_new/" title="sketch new" class="md-nav__link">
      sketch new
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_upload/" title="upload" class="md-nav__link">
      upload
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/arduino-cli_version/" title="version" class="md-nav__link">
      version
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      gRPC reference
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        gRPC reference
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../rpc/commands/" title="commands" class="md-nav__link">
      commands
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../rpc/monitor/" title="monitor" class="md-nav__link">
      monitor
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../rpc/settings/" title="settings" class="md-nav__link">
      settings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../rpc/debug/" title="debug" class="md-nav__link">
      debug
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Sketch build process
      </label>
    
    <a href="./" title="Sketch build process" class="md-nav__link md-nav__link--active">
      Sketch build process
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pre-processing" class="md-nav__link">
    Pre-Processing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dependency-resolution" class="md-nav__link">
    Dependency Resolution
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#architecture-matching" class="md-nav__link">
    Architecture Matching
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#folder-name-priority" class="md-nav__link">
    Folder Name Priority
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#location-priority" class="md-nav__link">
    Location Priority
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compilation" class="md-nav__link">
    Compilation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uploading" class="md-nav__link">
    Uploading
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../library-specification/" title="Library specification" class="md-nav__link">
      Library specification
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../platform-specification/" title="Platform specification" class="md-nav__link">
      Platform specification
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../package_index_json-specification/" title="package_index.json specification" class="md-nav__link">
      package_index.json specification
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pre-processing" class="md-nav__link">
    Pre-Processing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dependency-resolution" class="md-nav__link">
    Dependency Resolution
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#architecture-matching" class="md-nav__link">
    Architecture Matching
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#folder-name-priority" class="md-nav__link">
    Folder Name Priority
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#location-priority" class="md-nav__link">
    Location Priority
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compilation" class="md-nav__link">
    Compilation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uploading" class="md-nav__link">
    Uploading
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>Sketch build process</h1>
                
                <p>The process the Arduino environment uses to build a sketch. More useful information can be found in the <a href="../platform-specification/">Arduino platform specification</a>. Note that the following refers specifically to the build process for AVR targets. Other architectures will have a similar build process.</p>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>A number of things have to happen for your Arduino code to get onto the Arduino board. First, the Arduino environment performs some minor pre-processing to turn your sketch into a C++ program. Next, dependencies of the sketch are located. It then gets passed to a compiler (avr-gcc), which turns the human readable code into machine readable instructions (or object files). Then your code gets combined with (linked against) the standard Arduino libraries that provide basic functions like <code>digitalWrite()</code> or <code>Serial.print()</code>. The result is a single Intel hex file, which contains the specific bytes that need to be written to the program memory of the chip on the Arduino board. This file is then uploaded to the board: transmitted over the USB or serial connection via the bootloader already on the chip or with external programming hardware.</p>
<h2 id="pre-processing">Pre-Processing<a class="headerlink" href="#pre-processing" title="Permanent link">&para;</a></h2>
<p>The Arduino environment performs a few transformations to your sketch before passing it to the avr-gcc compiler:</p>
<ul>
<li>All .ino and .pde files in the sketch folder (shown in the IDE as tabs with no extension) are concatenated together, starting with the file that matches the folder name followed by the others in alphabetical order, and the .cpp extension is added to the filename.</li>
<li>If not already present, <code>#include &lt;Arduino.h&gt;</code> is added to the sketch. This header file (found in the core folder for the currently selected board) includes all the definitions needed for the standard Arduino core.</li>
<li>Prototypes are generated for all function definitions in .ino/.pde files that don't already have prototypes. In some rare cases prototype generation may fail for some functions. To work around this, you can provide your own prototypes for these functions.</li>
<li><code>#line</code> directives are added to make warning or error messages reflect the original sketch layout.</li>
</ul>
<p>No pre-processing is done to files in a sketch with any extension other than .ino or .pde. Additionally, .h files in the sketch are not automatically #included from the main sketch file. Further, if you want to call functions defined in a .c file from a .cpp file (like one generated from your sketch), you'll need to wrap its declarations in an <code>extern "C" {}</code> block that is defined only inside of C++ files.</p>
<h2 id="dependency-resolution">Dependency Resolution<a class="headerlink" href="#dependency-resolution" title="Permanent link">&para;</a></h2>
<p>The sketch is scanned recursively for dependencies. There are predefined include search paths:</p>
<ol>
<li>Core library folder (as defined by <a href="../platform-specification/#boardstxt"><code>{build.core}</code></a>)</li>
<li>Variant folder (as defined by <a href="../platform-specification/#boardstxt"><code>{build.variant}</code></a>)</li>
<li>Standard system directories (e.g., <a href="../platform-specification/#tools"><code>{runtime.tools.avr-gcc.path}/avr/include</code></a>)</li>
<li>Include search paths added to resolve prior dependencies</li>
</ol>
<p>If the dependency is not present in any of those locations, the installed libraries are then searched (see the <a href="#location-priority"><strong>Location Priority</strong> table</a> below for library locations). For information on the allowed library sub-folder structures see <a href="../library-specification/#source-code">the Arduino library specification</a>. <code>-I</code> options are generated for the path to each library dependency and appended to the <a href="../platform-specification/#recipes-to-compile-source-code"><code>includes</code> property</a>, to be used in <a href="../platform-specification/#recipes-to-compile-source-code">compilation recipes</a> in platform.txt.</p>
<p>If multiple libraries contain a file that matches the <code>#include</code> directive, the priority is determined by applying the following rules, one by one in this order, until a rule determines a winner:</p>
<ol>
<li>A library that is architecture compatible wins against a library that is not architecture compatible (see <a href="#architecture-matching"><strong>Architecture Matching</strong></a>)</li>
<li>A library that has better "folder name priority" wins (see <a href="#folder-name-priority"><strong>Folder Name Priority</strong></a>)</li>
<li>A library that is architecture optimized wins against a library that is not architecture optimized (see <a href="#architecture-matching"><strong>Architecture Matching</strong></a>)</li>
<li>A library that has a better "location priority" wins (see <a href="#location-priority"><strong>Location Priority</strong></a>)</li>
<li>A library that has a folder name with a better score using the "closest-match" algorithm wins</li>
<li>A library that has a folder name that comes first in alphanumeric order wins</li>
</ol>
<h3 id="architecture-matching">Architecture Matching<a class="headerlink" href="#architecture-matching" title="Permanent link">&para;</a></h3>
<p>A library is considered <strong>compatible</strong> with architecture <code>X</code> if the <code>architectures</code> field in <a href="../library-specification/#library-metadata">library.properties</a>:</p>
<ul>
<li>explicitly contains the architecture <code>X</code></li>
<li>contains the catch-all <code>*</code></li>
<li>is not specified at all.</li>
</ul>
<p>A library is considered <strong>optimized</strong> for architecture <code>X</code> only if the <code>architectures</code> field in library.properties explicitly contains the architecture <code>X</code>. This means that a library that is optimized for architecture <code>X</code> is also compatible with it.</p>
<p>Examples:</p>
<table>
<thead>
<tr>
<th><code>architectures</code> field in <code>library.properties</code></th>
<th>Compatible with <code>avr</code></th>
<th>Optimized for <code>avr</code></th>
</tr>
</thead>
<tbody>
<tr>
<td>not specified</td>
<td>YES</td>
<td>NO</td>
</tr>
<tr>
<td><code>architectures=*</code></td>
<td>YES</td>
<td>NO</td>
</tr>
<tr>
<td><code>architectures=avr</code></td>
<td>YES</td>
<td>YES</td>
</tr>
<tr>
<td><code>architectures=*,avr</code></td>
<td>YES</td>
<td>YES</td>
</tr>
<tr>
<td><code>architectures=*,esp8266</code></td>
<td>YES</td>
<td>NO</td>
</tr>
<tr>
<td><code>architectures=avr,esp8266</code></td>
<td>YES</td>
<td>YES</td>
</tr>
<tr>
<td><code>architectures=samd</code></td>
<td>NO</td>
<td>NO</td>
</tr>
</tbody>
</table>
<h3 id="folder-name-priority">Folder Name Priority<a class="headerlink" href="#folder-name-priority" title="Permanent link">&para;</a></h3>
<p>The "folder name priority" is determined as follows (in order of highest to lowest priority):</p>
<table>
<thead>
<tr>
<th>Rule</th>
<th>Example for <code>Servo.h</code></th>
</tr>
</thead>
<tbody>
<tr>
<td>The folder name matches the include 100%</td>
<td><code>Servo</code></td>
</tr>
<tr>
<td>The folder name matches the include 100%, except with a <code>-master</code> suffix</td>
<td><code>Servo-master</code></td>
</tr>
<tr>
<td>The folder name has a matching prefix</td>
<td><code>ServoWhatever</code></td>
</tr>
<tr>
<td>The folder name has a matching suffix</td>
<td><code>AwesomeServo</code></td>
</tr>
<tr>
<td>The folder name contains the include</td>
<td><code>AnAwesomeServoForWhatever</code></td>
</tr>
</tbody>
</table>
<h3 id="location-priority">Location Priority<a class="headerlink" href="#location-priority" title="Permanent link">&para;</a></h3>
<p>The "location priority" is determined as follows (in order of highest to lowest priority):</p>
<ol>
<li>The library is in the sketchbook (<code>{sketchbook path}/libraries</code>)</li>
<li>The library is bundled with the board platform/core (<a href="../platform-specification/#global-predefined-properties"><code>{runtime.platform.path}/libraries</code></a>)</li>
<li>The library is bundled with the <a href="../platform-specification/#referencing-another-core-variant-or-tool">referenced</a> board platform/core</li>
<li>The library is bundled with the IDE (<a href="../platform-specification/#global-predefined-properties"><code>{runtime.ide.path}/libraries</code></a>)</li>
</ol>
<h2 id="compilation">Compilation<a class="headerlink" href="#compilation" title="Permanent link">&para;</a></h2>
<p>Sketches are compiled by avr-gcc and avr-g++ according to the variables in the boards.txt file of the selected board's <a href="../platform-specification/">platform</a>.</p>
<p>The sketch is built in a temporary directory in the system-wide temporary directory (e.g. /tmp on Linux).</p>
<p>Files taken as source files for the build process are .S, .c and .cpp files (including the .cpp file generated from the sketch's .ino and .pde files during the sketch pre-processing step).
Source files of the target are compiled and output with .o extensions to this build directory, as are the main sketch files and any other source files in the sketch and any source files in any libraries which are <code>#include</code>d in the sketch.</p>
<p>Before compiling a source file, an attempt is made to reuse the previously compiled .o file, which speeds up the build process. A special .d (dependency) file provides a list of all other files included by the source. The compile step is skipped if the .o and .d files exist and have timestamps newer than the source and all the dependent files. If the source or any dependent file has been modified, or any error occurs verifying the files, the compiler is run normally, writing a new .o &amp; .d file. After a new board is selected from the Tools menu, all source files are rebuilt on the next compile.</p>
<p>These .o files are then linked together into a static library and the main sketch file is linked against this library. Only the parts of the library needed for your sketch are included in the final .hex file, reducing the size of most sketches.</p>
<p>The .hex file is the final output of the compilation which is then uploaded to the board.</p>
<p>If verbose output during compilation is checked in the Preferences dialog, the complete command line of each external command executed as part of the build process will be printed in the editor console.</p>
<h2 id="uploading">Uploading<a class="headerlink" href="#uploading" title="Permanent link">&para;</a></h2>
<p>Sketches are uploaded by avrdude. The upload process is also controlled by variables in the boards and main preferences files. See the <a href="../platform-specification/">Arduino platform specification</a> page for details.</p>
<p>If verbose output during upload is checked in the Preferences dialog, debugging information will be output to the editor console, including avrdude command lines and verbose output.</p>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../rpc/debug/" title="debug" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                debug
              </span>
            </div>
          </a>
        
        
          <a href="../library-specification/" title="Library specification" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Library specification
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright 2020 ARDUINO SA (http://www.arduino.cc/)
          </div>
        
        powered by
        <a href="https://www.mkdocs.org" target="_blank" rel="noopener">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.c33a9706.js"></script>
      
      <script>app.initialize({version:"1.1",url:{base:".."}})</script>
      
    
  </body>
</html>